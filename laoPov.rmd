---
title: "Lao Health and Poverty"
author: "Leah Hale"
date: "28/04/2015"
output: html_document
---
```{r,echo=FALSE}
library("xtable")
source("LoadData.R");
```

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.
# Respondent Gender Breakdown

```{r, results = "asis"}
RespGender<-lps$"q1_4";
RespGender.table<-xtable(table(RespGender) ,caption = "Respondant Gender");
RespGender.table
print(RespGender.table,type="html")
```
```r sum(RespGender.table)```/```r dim(lpsraw)[1]``` Valid gender entris,  `r sum (is.na(RespGender))` NA Gender entries.

Original Values [```r lpsraw$"q1_4"[is.na(RespGender)]```]
```{r,results='asis',echo=FALSE}
print(xtable(lpsraw[is.na(RespGender),1:20]),"html")
```
#Poor List
```{r,results='asis'}
VilPoor.table<-xtable(table(VilPoor))
print(VilPoor.table,type="html")
```
```r sum(VilPoor.table)```/```r dim(lpsraw)[1]```

#Respondant Gender To Poor
```{r,results='hold'}
table(RespGender,VilPoor)
````
#Wealth Score
```{r}

ScoreCols <- match("q9_1_1",names(lps)) : match("q9_1_10",names(lps));
#"q9_2_6" (last animal)
Score<-vector(length = dim(lps)[1])
for (i in 1:dim(lps)[1]) {Score[i]<-sum(lps[i,ScoreCols])}

score<-rowSums(lps[,ScoreCols]);
#Score
hist(Score,breaks = 10)
p1<-hist(Score[VilPoor],probability=TRUE);
p2<-hist(Score[!VilPoor],probability=TRUE);

# first histogram
plot( p1, col=rgb(0,0,1,1/4), xlim=c(0,20),freq=FALSE, xlab="Wealth Score", ylab="Response Density" )        
plot( p2, col=rgb(1,0,0,1/4), xlim=c(0,20),freq=FALSE, add=T)  # second

p1<-hist(Score[VilPoor],probability=FALSE);
p2<-hist(Score[!VilPoor],probability=FALSE);

# first histogram
plot( p1, col=rgb(0,0,1,1/4), xlim=c(0,20),freq=TRUE, xlab="Wealth Score", ylab="Response Density" )        
plot( p2, col=rgb(1,0,0,1/4), xlim=c(0,20),freq=TRUE, add=T)  # second

## Break by HEF 
p1<-hist(Score[HEFCard],probability=FALSE);
p2<-hist(Score[!HEFCard],probability=FALSE);


frame()
# first histogram
plot( p1, col=rgb(0,0,1,1/4), xlim=c(0,20),freq=FALSE, xlab="Wealth Score-", ylab="Response Density" )        
plot( p2, col=rgb(1,0,0,1/4), xlim=c(0,20),freq=FALSE, add=T)  # second

plot( p2, col=rgb(1,0,0,1/4), xlim=c(0,20),freq=TRUE, xlab="Wealth Score-", ylab="Response Count" )        
plot( p1, col=rgb(0,0,1,1/4), xlim=c(0,20),freq=TRUE, add=T)  # second


```

Red is no HEF.

HEF card holders are ```r sum(HEFCard)``` out of ```r length(HEFCard) ``` non card holders ```r sum(!HEFCard)``` 

```{r}
chisq.test(Score,HEFCard)
```

# 1.5<1.8.6 + 1.8.7
  1.5 Is this household on the village list of poor ho...
  
  1.8.6 Does anyone in your HH belong to any of the foll... - Poor HEF card,
  
  1.8.7 Does anyone in your HH belong to any of the foll... - Poor List of government (HEF or not)
  
```{r}
  HEFCard <-!is.na(lps$"q1_8_6"); 
  AllPoor <-!is.na(lps$"q1_8_7");
  sum(HEFCard)  
  sum(AllPoor)
  sum(HEFCard & AllPoor)
  sum(HEFCard | AllPoor)
  sum(VilPoor)
  sum(VilPoor & !(HEFCard | AllPoor))
  sum((HEFCard | AllPoor) & !(VilPoor))

  table(HEFCard,PreId)
  table(AllPoor,PreId)
```  
There are ```r sum(VilPoor | HEFCard | AllPoor)``` on one poor list or other.

```r  sum(HEFCard)  ``` people are on the HEF list and a seperate ```r  sum(AllPoor & !HEFCard)``` answered yes to being on a govt list.

  ```r sum(HEFCard & AllPoor)``` respondants answered yes to both, and ```r  sum(HEFCard | AllPoor)``` answered yes to either.
  
  Of the ```r  sum(HEFCard | AllPoor)```, ```r sum((HEFCard | AllPoor) & (VilPoor))``` are on the vilage poor list.
  There being ```r  sum(VilPoor)``` on the village poor list, this leaves ```r  sum(VilPoor & !(HEFCard | AllPoor))``` on the vilage poor list who neither have a HEF card nor answer yes to being on a govt poor list. Conversly there are ```r  sum(HEFCard  & !(VilPoor))``` who have an HEF card and are not on the village poor list and ```r sum(AllPoor  & !(VilPoor))``` on a govt poor list but not a village one.

```{r}
OnAnyList   = VilPoor |    HEFCard | AllPoor;
VillageOnly = VilPoor & !( HEFCard | AllPoor);
HEFOnly     = HEFCard &  (!VilPoor | AllPoor);
GVTOnly     = AllPoor &  (!VilPoor |HEFCard);
Village_HEF = VilPoor & HEFCard;
Village_GVT = VilPoor & AllPoor;


OnAnyList_ByDist <-table(lps$"dist"[OnAnyList],exclude=c(NA))/sum(OnAnyList);

VillageOnly_ByDist <-table(lps$"dist"[VillageOnly],exclude=c(NA))/sum(VillageOnly);
HEFOnly_ByDist     <-table(lps$"dist"[HEFOnly     ],exclude=c(NA))/sum(HEFOnly    );
GVTOnly_ByDist     <-table(lps$"dist"[GVTOnly     ],exclude=c(NA))/sum(GVTOnly    );
Village_HEF_ByDist <-table(lps$"dist"[Village_HEF ],exclude=c(NA))/sum(Village_HEF);
Village_GVT_ByDist <-table(lps$"dist"[Village_GVT ],exclude=c(NA))/sum(Village_GVT);


TotalOnList = c(sum(OnAnyList),sum(VillageOnly),sum(HEFOnly),sum(GVTOnly),sum(Village_HEF),sum(Village_GVT));

ptab <-rbind(OnAnyList_ByDist,VillageOnly_ByDist,HEFOnly_ByDist,GVTOnly_ByDist,Village_HEF_ByDist,Village_GVT_ByDist);
ptab <-cbind(ptab*100,TotalOnList);
print(ptab,digits=2)
```
Percentages in the preceding colums are by district for each row only.


#1.1 First illness health seeking behavior and being registered on the list of poor
